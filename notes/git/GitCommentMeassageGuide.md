# Git コミットメッセージ 完全ガイド  
コミットの書き方と、やってはいけないアンチパターンをまとめた実用ガイドです。  
チーム開発でも個人開発でも、この1ファイルを置いておけば迷いません。

---

# ✅ 基本方針

1. **1コミット＝1変更** を守る  
2. **何を変えたかが一目で分かるメッセージ** にする  
3. 必要なら **なぜ変更したか** を本文に書く  
4. **命令形＋短い文**（Fix, Add, Update ではなく Fix, Add, Change など）で統一

---

# ✅ 推奨フォーマット
```
<タイプ>: <簡潔な説明>

（必要なら）変更理由や補足
```

## 例
```
fix: 誤ったデプロイ内容を正しいコードに置き換え

本来のブランチと異なるビルドが反映されていたため修正。
```
```
chore: Python 3.12 にアップデートし環境変数を追加

ランタイム変更に伴う import 修正と設定追加を実施。
```

---

# ✅ よく使うタイプ

| タイプ | 説明 |
|-------|------|
| `feat` | 新機能 |
| `fix` | バグ修正 |
| `refactor` | 挙動を変えない改善 |
| `chore` | 設定変更・依存更新・ランタイム変更など |
| `docs` | ドキュメントのみ変更 |
| `test` | テストコード関連 |
| `style` | フォーマット変更・Lint 修正（挙動不変） |

迷ったら **chore** が無難。

---

# ✅ 実運用で役に立つポイント

- **理由を書くと未来の自分が助かる**  
- コミットは **小さく短く**  
- タイトルは **50文字以内**  
- 本文は **72文字折り返し** が読みやすい  
- 英語 or 日本語のどちらかでスタイルを統一

---

# ✅ コマンド例

### シンプル
```
git commit -m "fix: 誤ってデプロイされたコードを本来の内容に修正"
```

### 本文あり
```
git commit -m "chore: Python 3.12 にアップデートし環境変数を追加"
-m "ランタイム更新に伴う import 修正と設定追加。"
```

---

# ❌ Git コミットメッセージ アンチパターン集

## ❌ 1. 「update」「変更」など意味が広すぎる

### 例
```
update: 修正
変更しました
```

### 理由
- 何をしたのか分からない  
- 後から検索できない  
- 新機能かバグ修正か判断不能  

**→ ログがゴミ化するので避けるべき。**

---

## ❌ 2. コミットに複数の目的を詰め込む

### 例
```
fix: バグ修正と機能追加とリファクタ
```

### 理由
- レビュー困難  
- revert 不可能  
- ノイズの塊になる  

**→ 1コミット＝1目的。**

---

## ❌ 3. 「修正」「直した」だけ

### 例
```
修正
直した
```

### 理由
- 何を直したか分からない  
- 過去履歴の価値ゼロ  

---

## ❌ 4. 日本語と英語が混在している

### 理由
- スタイルが統一されず読みにくい  
- チーム内でルールが崩れる  

**→ 英語 or 日本語、どちらかに統一。**

---

## ❌ 5. タイトルが長すぎる

### 理由
- Git ログが崩れて読みにくい  
- 情報過多で逆に理解しづらい  

**→ タイトルは50文字以内を推奨。**

---

## ❌ 6. 重要な変更なのに本文を書かない

### 例
```
chore: ランタイムを Python 3.12 に変更
（理由不明）
```

### 理由
- インフラ・依存更新系は理由が重要  
- 半年後に「なんでこれ変えた？」となる  

---

## ❌ 7. force push の乱用

### 理由
- 他人の作業を破壊する  
- 履歴が食い違うと復旧が大変  

**→ 個人ブランチならOK。共同作業では注意。**

---

## ❌ 8. コミットが大きすぎる

### 理由
- 自分ですら何を変えたか覚えていない  
- レビュー不能  
- revert 不可能  

---

## ❌ 9. 自動生成ファイルのコミット

### 例
- dist/
- node_modules/
- build/
- .terraform/

### 理由
- 履歴が太り続ける  
- ノイズだらけで差分が読めない  

---

## ❌ 10. ブランチ名とコミット内容が一致しない

### 理由
- issue 管理と紐づかない  
- 追跡が困難  

**→ 必要なら issue 番号を入れる： `feat: #32 新画面追加`**

---

# ✅ 最後に（重要）

コミットメッセージは「ログ」ではなく **未来の自分と他人への説明書** です。  
よいコミットは開発速度と品質を確実に上げます。

---

# ✅ 付録：テンプレ
```
<type>: <短い要約>

<必要なら本文（変更理由・背景・制約など）>
```

---
```
feat: ユーザー一覧APIを追加

要望により一覧機能を実装。今後はフィルタリングも追加予定。
```

```
fix: DynamoDB のパーティションキー不備を修正

投入時のキー欠落が原因でクエリ結果に誤りが出ていたため修正。
```

```
chore: Lambda を Python 3.12 に更新し環境変数を追加

ランタイム更新に伴い import 修正と関連設定の追加を実施。
```