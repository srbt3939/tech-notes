# Git コミットメッセージ 完全ガイド  
コミットの書き方とアンチパターンをまとめた個人用実用ガイドです。  

---

# 基本方針

1. **1コミット＝1変更** を守る  
2. **何を変えたかが一目で分かるメッセージ** にする  
3. 必要なら **なぜ変更したか** を本文に書く  
4. **命令形＋短い文**（Fix, Add, Update ではなく Fix, Add, Change など）で統一

---

## ✅ 推奨フォーマット
```
<タイプ>: <簡潔な説明>

（必要なら）変更理由や補足
```

### 例
```
fix: 誤ったデプロイ内容を正しいコードに置き換え

本来のブランチと異なるビルドが反映されていたため修正。
```
```
chore: Python 3.12 にアップデートし環境変数を追加

ランタイム変更に伴う import 修正と設定追加を実施。
```

---

### タイプ

| タイプ | 説明 |
|-------|------|
| `feat` | 新機能 |
| `fix` | バグ修正 |
| `refactor` | 挙動を変えない修正・変更 |
| `chore` | 設定変更・依存更新・ランタイム変更など |
| `docs` | ドキュメントのみ変更 |
| `test` | テストコード関連の追加・修正変更 |
| `style` | フォーマット変更・Lint 修正（挙動不変） |

迷ったら **chore** でも良いが、`update`と同様に広い意味にならない運用を心がける。

---

## ✅ 実運用で役に立つポイント

- **理由を書くと未来の自分が助かる**  
- コミットは **小さく短く**  
- タイトルは **50文字以内**  
- 本文は **72文字折り返し** が読みやすい  
- 英語 or 日本語のどちらかでスタイルを統一

## コマンド例

### シンプル
```
git commit -m "fix: 誤ってデプロイされたコードを本来の内容に修正"
```

### 本文あり
```
git commit -m "chore: Python 3.12 にアップデートし環境変数を追加"
-m "ランタイム更新に伴う import 修正と設定追加。"
```


---

# ✅アンチパターン早見表

| No. | アンチパターン | 例 | 理由 | 対策 |
|---:|---|---|---|---|
| 1 | 意味が広すぎる (`update`, `変更`) | 何をしたか不明・検索できない・fix/feat 判別不可 | 具体的なタイプを使う（`fix`/`feat`/`refactor`/`chore`） |
| 2 | 複数目的を詰め込む | レビュー困難・revert不可・ノイズ | 1コミット＝1目的に分割 |
| 3 | 「修正」「直した」だけ  | 何を直したか不明・履歴の価値ゼロ | 何をどう直したかを短く明記 |
| 4 | 日本語と英語の混在 | スタイルが崩れる・読みにくい | 言語をチームで統一（英語か日本語） |
| 5 | タイトルが長すぎる | ログ表示が崩れる・理解しづらい | タイトルは50文字以内推奨 |
| 6 | 重要変更なのに本文なし | `chore: ランタイムを Python 3.12 に変更`→ 理由不明で後で困る | 本文に理由・影響・制約を記載 |
| 7 | force push の乱用  | 他人の作業を壊す・履歴復旧が困難 | 個人ブランチのみで利用、共同作業は注意 |
| 8 | コミットが大きすぎる | 何を変えたか分からない・レビュー不可 | 小さく分割し目的ごとにコミット |
| 9 | 自動生成ファイルをコミット  | 履歴が肥大化・差分が読めない | .gitignoreで除外・生成物はコミットしない |
| 10 | ブランチ名と内容が一致しない  | issue管理と紐づかない・追跡困難 | 必要なら issue 番号を入れる（例: `feat: #32 新画面追加`） |


---

# 最後に

コミットメッセージは「ログ」ではなく **未来の自分と他人への説明書** です。  
よいコミットは開発速度と品質を確実に上げます。

---

# 付録：例文集
```
<type>: <短い要約>

<必要なら本文（変更理由・背景・制約など）>
```

---
```
feat: ユーザー一覧APIを追加

要望により一覧機能を実装。今後はフィルタリングも追加予定。
```

```
fix: DynamoDB のパーティションキー不備を修正

投入時のキー欠落が原因でクエリ結果に誤りが出ていたため修正。
```

```
chore: Lambda を Python 3.12 に更新し環境変数を追加

ランタイム更新に伴い import 修正と関連設定の追加を実施。
```